<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- namespace 不是必须为类的全限定名,只要是能够保证不重复即可 -->
<mapper namespace="com.edrop.mapper.UserMapper">

	<!-- id 查询用户信息 -->
	<select id="selUserInfoById" resultType="user">
		select * from user where id = #{id}
	</select>
	<!-- 插入用户信息 -->
	<insert id="insUserInfo">
		insert into user(phone,username,password,imgpath,imgname,address,detailAddress,gender,registerTime) 
		values(#{phone}, #{username}, #{password}, #{imgpath},#{imgname},#{address}, #{detailAddress}, #{gender}, #{registerTime})
	</insert>
	
	<!-- 更新用户数据 -->
	<update id="upUserInfo">
		update user
	 	<set>
	 		<if test="phone != '' and phone != null">
	 			phone = #{phone},
	 		</if>
	 		<if test="username != '' and username != null">
	 			username = #{username},
	 		</if>
	 		<if test="address != '' and address != null">
	 			address = #{address},
	 		</if>
	 		<if test="gender != '' and gender != null">
	 			gender = #{gender},
	 		</if>
	 		<if test="detailAddress != '' and detailAddress != null">
	 			detailAddress = #{detailAddress},
	 		</if>
	 	</set>
	 	where id = #{id}
	</update>
	
	<select id="selectAllUser" resultType="com.edrop.pojo.User">
		select *
		from user
		<where>
			<if test="username != '' and username != null">
				and username like concat('%','${username}','%')
			</if>
			<if test="phone != '' and phone != null">
				and phone like concat('%','${phone}','%')
			</if>
		</where>
		
	</select>

	
</mapper>